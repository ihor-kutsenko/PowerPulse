"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[995],{844:function(e,t,r){var s=r(3329);t.Z=function(e){var t=e.text,r=e.className,c=e.disabled,n=e.type,a=e.onClick;return(0,s.jsx)("button",{className:r,disabled:c,type:n,onClick:a,children:t})}},7312:function(e,t,r){r.d(t,{Z:function(){return m}});var s=r(2791),c=r(4164),n=r(4067),a="BasicModalWindow_overlay__cp9tO",i="BasicModalWindow_modal_wrapper__La1IP",o="BasicModalWindow_btn_close__vCDpE",d="BasicModalWindow_icon_close__ADrBu",l=r(3329),u=document.querySelector("#root-modal"),m=function(e){var t=e.children,r=e.handleModalToggle;(0,s.useEffect)((function(){var e=function(e){"Escape"===e.code&&r()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[r]);return(0,c.createPortal)((0,l.jsx)("div",{className:a,onClick:function(e){e.currentTarget===e.target&&r()},children:(0,l.jsxs)("div",{className:i,children:[(0,l.jsx)("button",{className:o,onClick:r,children:(0,l.jsx)(n.Z,{iconId:"icon-close",className:d})}),t]})}),u)}},6717:function(e,t,r){r.d(t,{Z:function(){return n}});var s="Section_section__0XkUm",c=r(3329),n=function(e){var t=e.children;return(0,c.jsx)("div",{className:s,children:t})}},5420:function(e,t,r){r.d(t,{Z:function(){return n}});var s="Title_title__IlEm8",c=r(3329),n=function(e){var t=e.text,r=e.className,n="".concat(s," ").concat(r||"");return(0,c.jsx)("h2",{className:n,children:t})}},2009:function(e,t,r){r.d(t,{Z:function(){return a}});var s=r(5705),c="ErrorMessages_errorMessage__6nAso",n=r(3329),a=function(e){var t=e.nameField;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.Bc,{className:c,name:t,component:"div"})})}},4916:function(e,t,r){r.r(t),r.d(t,{default:function(){return ye}});var s=r(3409),c=r(6717),n=r(5420),a=r(4942),i=r(1413),o=r(3433),d=r(9439),l=r(5705),u=r(9434),m=r(2791),_=r(1087),x=r(4067),p=function(e){return e.products.items},h=function(e){return e.products.category},f=function(e){return e.products.filters},j=function(e){return e.products.getMore},g=function(e){return e.products.isLoading},v=function(e){return e.products.error},N=function(){return{products:(0,u.v9)(p),category:(0,u.v9)(h),filters:(0,u.v9)(f),productsGetMore:(0,u.v9)(j),productsIsLoading:(0,u.v9)(g),productsError:(0,u.v9)(v)}},I=r(1617),Z=r(3173),b="ProductsFilters_filterForm__Fjk1b",P="ProductsFilters_filterForm_SearchWrapper__2lDrS",S="ProductsFilters_filterForm_SearchField__uSysG",y="ProductsFilters_filterForm_btnSearch__LN4+Z",w="ProductsFilters_filterForm_btnCancel__vr-iK",F="ProductsFilters_filterForm_iconSearch__xYcu4",A="ProductsFilters_filterForm_iconCancel__97VVG",E="ProductsFilters_filterForm_SelectWrapper__c6LSR",C="ProductsFilters_filterForm_selectCategory__Z2EuY",k="ProductsFilters_filterForm_selectRecommended__9nfY3",M=r(3329),R=function(){var e=(0,u.I0)(),t=(0,_.lr)(),r=(0,d.Z)(t,2),s=r[0],c=r[1],n=N(),p=n.category,h=n.filters,f=(0,m.useMemo)((function(){return Object.fromEntries((0,o.Z)(s))}),[s]),j=""!==h.search||""!==h.category||""!==h.recommended,g=0===Object.keys(f).length,v=(0,l.TA)({initialValues:{search:f.search||h.search,category:f.category||h.category,recommended:f.recommended||h.recommended},onSubmit:function(e){return R(e)}});(0,m.useEffect)((function(){g&&j&&c({search:h.search,category:h.category,recommended:h.recommended}),e((0,I.k)())}),[e,j,g,h.search,h.category,h.recommended,c]);var R=function(t){c(t),e((0,Z.U7)()),e((0,Z.rr)((0,i.Z)({page:1},t)))},T=function(e){v.handleChange(e);var t=v.initialValues,r=v.values;if(e.target.value!==t[e.target.value]){var s=(0,i.Z)((0,i.Z)({},r),{},(0,a.Z)({},e.target.name,e.target.value));R(s)}};return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("form",{className:b,onSubmit:v.handleSubmit,children:[(0,M.jsxs)("div",{className:P,children:[(0,M.jsx)("input",{type:"text",name:"search",placeholder:"Search",className:S,value:v.values.search,onChange:v.handleChange}),(0,M.jsx)("button",{className:y,type:"submit",children:(0,M.jsx)(x.Z,{iconId:"icon-Search",className:F})}),""!==v.values.search&&(0,M.jsx)("button",{className:w,type:"button",onClick:function(){v.setFieldValue("search",""),v.handleSubmit()},children:(0,M.jsx)(x.Z,{iconId:"icon-close",className:A})})]}),(0,M.jsxs)("div",{className:E,children:[(0,M.jsxs)("select",{name:"category",className:C,onChange:T,children:[(0,M.jsx)("option",{value:"",children:"Categories"}),p.map((function(e){return(0,M.jsx)("option",{value:e,children:e},e)}))]}),(0,M.jsxs)("select",{name:"recommended",className:k,onChange:T,children:[(0,M.jsx)("option",{value:"",children:"All"}),(0,M.jsx)("option",{value:!0,children:"Recommended"}),(0,M.jsx)("option",{value:!1,children:"Not recommended"})]})]})]})})},T=r(7312),W=r(6727),L=W.Ry().shape({amount:W.Rx().positive("Amount must be a positive number").required("Amount is required")}),V=r(2009),O=r(9577),U=r(838),Y="AddProduct_container__u9p90",B="AddProduct_input_container__TFyaa",D="AddProduct_input__gramsWrapper__lOz-e",G="AddProduct_error__-3P3L",q="AddProduct_success__d-knL",J="AddProduct_input_product__a166n",z="AddProduct_input_grams__DYFkD",H="AddProduct_text__xCUEZ",K="AddProduct_text_value__8V3XY",X="AddProduct_btn_wrapper__mDTdg",Q="AddProduct_btn_add__gqFcw",$="AddProduct_btn_cancel__dlKVt",ee=function(e){var t=e.product,r=e.handleModalProduct,s=e.handleModalSuccess,c=e.handleSelectedProduct,n=function(e){return Math.round(e*t.calories/100)},a=(0,U.Z)(new Date);return(0,M.jsx)("div",{className:Y,children:(0,M.jsx)(l.J9,{initialValues:{amount:""},validationSchema:L,onSubmit:function(e){var i={date:a,product:t._id,amount:e.amount,calories:n(e.amount)};r(),s(),c(i)},children:function(e){return(0,M.jsxs)(l.l0,{children:[(0,M.jsxs)("div",{className:B,children:[(0,M.jsx)("label",{htmlFor:"title",children:(0,M.jsx)(l.gN,{className:J,id:"title",type:"text",name:"title",value:(0,O.Z)(t.title),disabled:!0})}),(0,M.jsxs)("div",{className:"".concat(D," ").concat(e.errors.amount?"".concat(G):e.errors.amount?"":"".concat(q)),children:[(0,M.jsx)(l.gN,{className:z,id:"title",type:"text",name:"amount",placeholder:"grams",autoFocus:!0}),(0,M.jsx)(V.Z,{nameField:"amount",component:"div"})]})]}),(0,M.jsxs)("p",{className:H,children:["Calories:"," ",(0,M.jsx)("span",{className:K,children:(0,M.jsx)(l.gN,{name:"amount",children:function(e){var t=e.field;return n(t.value)}})})]}),(0,M.jsxs)("div",{className:X,children:[(0,M.jsxs)("button",{className:Q,type:"submit",disabled:!e.isValid,children:[" ","Add to diary"]}),(0,M.jsx)("button",{className:$,type:"button",onClick:r,children:"Cancel"})]})]})}})})},te=r(844),re=r.p+"static/media/mango.2edbd1522a105924ee3e.png",se=r(2686),ce="AddProductSuccess_container__bj4AL",ne="AddProductSuccess_wrapper__5IHaN",ae="AddProductSuccess_img_wrapper__cSWCn",ie="AddProductSuccess_img__4txf8",oe="AddProductSuccess_title__13vRS",de="AddProductSuccess_text__hBKJS",le="AddProductSuccess_span__EVUiN",ue="AddProductSuccess_btn_next__tuhGP",me="AddProductSuccess_icon_right__At-07",_e="AddProductSuccess_link_wrapper__2OgCG",xe=function(e){var t=e.handleModalSuccess,r=e.selectedProduct;return(0,M.jsx)("div",{className:ce,children:(0,M.jsxs)("div",{className:ne,children:[(0,M.jsxs)("div",{className:ae,children:[(0,M.jsx)("img",{src:re,alt:"Mango",className:ie}),(0,M.jsx)("p",{className:oe,children:"Well done"}),(0,M.jsxs)("p",{className:de,children:["Calories:",(0,M.jsx)("span",{className:le,children:r.calories})]})]}),(0,M.jsx)(te.Z,{text:"Next product",type:"button",className:ue,onClick:t}),(0,M.jsx)(_.rU,{to:se.zw,onClick:t,children:(0,M.jsx)("div",{className:_e,children:(0,M.jsxs)("p",{className:de,children:["To the diary",(0,M.jsx)(x.Z,{iconId:"icon-arrow-right",className:me})]})})})]})})},pe=r(1980),he=r(437),fe=(0,m.forwardRef)((function(e,t){var r=e.product,s=(0,m.useState)(!1),c=(0,d.Z)(s,2),n=c[0],a=c[1],i=(0,m.useState)(!1),o=(0,d.Z)(i,2),l=o[0],u=o[1],_=(0,m.useState)(""),p=(0,d.Z)(_,2),h=p[0],f=p[1],j=(0,pe.Z)().user.profileSettings.blood,g=function(){return u(!l)},v=function(){return a(!n)},N=r.groupBloodNotAllowed[j];return(0,M.jsxs)("div",{className:he.Z.exercisesItem_wrapper,ref:t,children:[(0,M.jsxs)("div",{className:he.Z.exercisesItem_topWrapper,children:[(0,M.jsx)("p",{className:he.Z.exercisesItem_text,children:"diet"}),N?(0,M.jsxs)("div",{className:he.Z.productRecommended,children:[(0,M.jsx)("p",{className:he.Z.productRecommendedTrue}),(0,M.jsx)("p",{children:"Recommended"})]}):(0,M.jsxs)("div",{className:he.Z.productRecommended,children:[(0,M.jsx)("p",{className:he.Z.productRecommendedFalse}),(0,M.jsx)("p",{children:"Not recommended"})]}),(0,M.jsxs)("button",{className:he.Z.exercisesItem_btnStart,onClick:function(){g()},children:["Add",(0,M.jsx)(x.Z,{iconId:"icon-arrow-right",className:he.Z.exercisesItem_iconArrowRight})]})]}),(0,M.jsxs)("div",{className:he.Z.exercisesItem_nameWrapper,children:[(0,M.jsx)(x.Z,{iconId:"icon-run",className:he.Z.exercisesItem_iconRun}),(0,M.jsx)("h3",{className:he.Z.exercisesItem_title,children:r.title})]}),(0,M.jsxs)("ul",{className:he.Z.exercisesItem_bottomList,children:[(0,M.jsxs)("li",{className:he.Z.exercisesItem_item,children:["Calories:",(0,M.jsx)("span",{className:he.Z.exercisesItem_itemText,children:r.calories})]}),(0,M.jsxs)("li",{className:he.Z.exercisesItem_item,children:["Category:",(0,M.jsx)("span",{className:he.Z.exercisesItem_itemText,children:r.category})]}),(0,M.jsxs)("li",{className:he.Z.exercisesItem_item,children:["Weight:",(0,M.jsx)("span",{className:he.Z.exercisesItem_itemText,children:r.weight})]})]}),l&&(0,M.jsx)(T.Z,{handleModalToggle:g,children:(0,M.jsx)(ee,{product:r,handleModalProduct:g,handleModalSuccess:v,handleSelectedProduct:function(e){f(e)}})}),n&&(0,M.jsx)(T.Z,{handleModalToggle:v,children:(0,M.jsx)(xe,{handleModalSuccess:v,selectedProduct:h})})]})})),je="ProductsNotFound_wrapper__H9+7J",ge="ProductsNotFound_text__YAVMi",ve="ProductsNotFound_warningText__ECvka",Ne=function(){return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("div",{className:je,children:[(0,M.jsxs)("p",{className:ge,children:[(0,M.jsxs)("span",{className:ve,children:["Sorry, no results were found"," "]}),"for the product filters you selected. You may want to consider other search options to find the product you want. Our range is wide and you have the opportunity to find more options that suit your needs."]}),(0,M.jsx)("p",{className:ge,children:(0,M.jsx)("span",{className:ve,children:"Try changing the search parameters."})})]})})},Ie=r.p+"static/media/products-list-bg.1b59cc35c57c71387b80.jpg",Ze=r(2182),be=function(){var e=(0,u.I0)(),t=(0,_.lr)(),r=(0,d.Z)(t,1)[0],s=(0,m.useRef)(),c=N(),n=c.products,a=c.filters,l=c.productsGetMore,x=(0,m.useMemo)((function(){return Object.fromEntries((0,o.Z)(r))}),[r]),p=Object.keys(x).length>0&&(x.search!==a.search||x.category!==a.category||x.recommended!==a.recommended),h=(0,m.useCallback)((function(t){s.current&&s.current.disconnect(),s.current=new IntersectionObserver((function(t){if(t[0].isIntersecting&&l){var r=a.page+1;e((0,Z.rr)({page:r}))}})),t&&s.current.observe(t)}),[l,e,a.page]);return(0,m.useEffect)((function(){var t=a;p&&e((0,Z.rr)((0,i.Z)({},x))),e((0,I.t)({filterParams:t}))}),[e,a,x,p]),(0,m.useEffect)((function(){return function(){e((0,Z.U7)()),e((0,Z.rr)({page:1}))}}),[e]),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("div",{className:Ze.Z.list,children:[(0,M.jsxs)("div",{className:Ze.Z.exercise_container,children:[0===n.length&&(0,M.jsx)(Ne,{}),n.map((function(e,t){return(0,M.jsx)(fe,{product:e,ref:h},"".concat(e._id,"-").concat(t))}))]}),(0,M.jsx)("img",{src:Ie,alt:"imag",className:Ze.Z.img_bgProducts})]})})},Pe={wrapper_products:"Products_wrapper_products__+JUbc"},Se=function(){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:Pe.wrapper_products,children:[(0,M.jsx)(n.Z,{text:"Products",className:Pe.title}),(0,M.jsx)(R,{})]}),(0,M.jsx)(be,{})]})},ye=function(){return(0,M.jsx)(s.Z,{children:(0,M.jsx)(c.Z,{children:(0,M.jsx)(Se,{})})})}},9577:function(e,t){t.Z=function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}},838:function(e,t){t.Z=function(e){var t=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return"".concat(s,"-").concat(r,"-").concat(t)}},437:function(e,t){t.Z={exercisesItem_wrapper:"ExercisesItem_exercisesItem_wrapper__9tI51",exercisesItem_topWrapper:"ExercisesItem_exercisesItem_topWrapper__bQS1A",exercisesItem_text:"ExercisesItem_exercisesItem_text__MRQIi",exercisesItem_btnStart:"ExercisesItem_exercisesItem_btnStart__SvGPV",exercisesItem_iconArrowRight:"ExercisesItem_exercisesItem_iconArrowRight__pcf0G",exercisesItem_nameWrapper:"ExercisesItem_exercisesItem_nameWrapper__A6gsI",exercisesItem_iconRun:"ExercisesItem_exercisesItem_iconRun__as+U3",exercisesItem_title:"ExercisesItem_exercisesItem_title__zov1a",exercisesItem_bottomList:"ExercisesItem_exercisesItem_bottomList__eYrW1",exercisesItem_item:"ExercisesItem_exercisesItem_item__tyTTn",exercisesItem_itemText:"ExercisesItem_exercisesItem_itemText__uAydW",productRecommended:"ExercisesItem_productRecommended__COHlQ",productRecommendedTrue:"ExercisesItem_productRecommendedTrue__XMKfw",productRecommendedFalse:"ExercisesItem_productRecommendedFalse__-wl2E"}},2182:function(e,t){t.Z={exercise_container:"ExerciseList_exercise_container__8E+XZ",img_bg:"ExerciseList_img_bg__zqTJy",img_bgProducts:"ExerciseList_img_bgProducts__52HZk"}}}]);
//# sourceMappingURL=995.88455a57.chunk.js.map